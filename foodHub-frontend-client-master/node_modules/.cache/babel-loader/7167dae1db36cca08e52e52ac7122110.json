{"ast":null,"code":"import { SET_RESTAURANTS, LOADING_DATA, SET_RESTAURANT, LOADING_UI, SET_ERROR_ITEM, SERVER_ERROR, CLEAR_ERRORS, ADD_ITEM, DELETE_ITEM, EDIT_ITEM, ADD_CART_SUCCESS, ADD_CART_FAIL, SET_CART, DELETE_ITEM_CART, SET_ERRORS, SET_ORDERS, EDIT_STATUS } from \"../types\";\nimport axios from \"../../util/axios\";\nimport axiosNewInstance from \"axios\";\nimport { getUserData } from \"./authActions\";\nexport const fetchRestaurants = () => dispatch => {\n  dispatch({\n    type: LOADING_DATA\n  });\n  axios.get(\"/restaurants\").then(res => {\n    dispatch({\n      type: SET_RESTAURANTS,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n    dispatch({\n      type: SET_RESTAURANTS,\n      payload: []\n    });\n  });\n};\nexport const fetchRestaurantsByAddress = (lat, lng) => dispatch => {\n  dispatch({\n    type: LOADING_DATA\n  });\n  axios.get(`/restaurants-location/${lat}/${lng}`).then(res => {\n    dispatch({\n      type: SET_RESTAURANTS,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n    dispatch({\n      type: SET_RESTAURANTS,\n      payload: []\n    });\n  });\n};\nexport const fetchRestaurant = restId => dispatch => {\n  dispatch({\n    type: LOADING_DATA\n  });\n  axios.get(`/restaurant/${restId}`).then(res => {\n    dispatch({\n      type: SET_RESTAURANT,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n    dispatch({\n      type: SET_RESTAURANT,\n      payload: {}\n    });\n  });\n};\nexport const addItem = itemData => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(`/seller/create-item`, itemData).then(res => {\n    dispatch({\n      type: ADD_ITEM,\n      payload: res.data.item\n    });\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n  }).catch(err => {\n    console.log(err.response.data);\n\n    if (err.response) {\n      dispatch({\n        type: SET_ERROR_ITEM,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const deleteItem = itemId => dispatch => {\n  axios.delete(`/seller/delete-item/${itemId}`).then(res => {\n    dispatch({\n      type: DELETE_ITEM,\n      payload: itemId\n    });\n  }).catch(err => {\n    console.log(err.response);\n  });\n};\nexport const editItem = (itemData, itemId) => dispatch => {\n  axios.put(`/seller/edit-item/${itemId}`, itemData).then(res => {\n    dispatch({\n      type: EDIT_ITEM,\n      payload: res.data.item\n    });\n  }).catch(err => {\n    console.log(err.response.data);\n\n    if (err.response) {\n      dispatch({\n        type: SET_ERROR_ITEM,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const addToCart = itemData => dispatch => {\n  axios.post(\"/cart\", itemData).then(res => {\n    dispatch({\n      type: ADD_CART_SUCCESS,\n      payload: itemData.itemId\n    });\n    dispatch(getCart());\n  }).catch(err => {\n    console.log(err.response);\n    dispatch({\n      type: ADD_CART_FAIL\n    });\n  });\n};\nexport const getCart = () => dispatch => {\n  axios.get(\"/cart\").then(res => {\n    dispatch({\n      type: SET_CART,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err.response);\n    dispatch({\n      type: SET_CART,\n      payload: []\n    });\n  });\n};\nexport const deleteCartItem = itemData => dispatch => {\n  axios.post(\"/delete-cart-item\", itemData).then(res => {\n    dispatch({\n      type: DELETE_ITEM_CART\n    });\n    dispatch(getCart());\n  }).catch(err => {\n    console.log(err.response);\n  });\n};\nexport const removeCartItem = itemID => dispatch => {\n  axios.post(`/remove-cart-item/${itemID}`).then(res => {\n    console.log(res.data);\n    dispatch(getCart());\n  }).catch(err => {\n    console.log(err.response);\n  });\n};\nexport const fetchAddress = (userData, history) => dispatch => {\n  const location = `+${userData.aptName},+${userData.locality},+${userData.street},+${userData.zip}`;\n  axiosNewInstance.get(\"https://maps.googleapis.com/maps/api/geocode/json\", {\n    params: {\n      address: location,\n      key: process.env.REACT_APP_GOOGLE_API_KEY\n    }\n  }).then(result => {\n    const formattedAddress = result.data.results[0].formatted_address;\n    console.log(formattedAddress);\n    const lat = result.data.results[0].geometry.location.lat;\n    const lng = result.data.results[0].geometry.location.lng;\n    userData.lat = lat;\n    userData.lng = lng;\n    userData.formattedAddress = formattedAddress;\n    dispatch(addAddress(userData, history));\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const addAddress = (userData, history) => dispatch => {\n  console.log(userData.formattedAddress);\n  axios.post(\"/user/address\", userData).then(res => {\n    // console.log(res.data);\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    dispatch(placeOrder(history));\n  }).catch(err => {\n    console.log(err.response);\n\n    if (err.response) {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const placeOrder = history => dispatch => {\n  axios.post(\"/order\").then(res => {\n    history.push(\"/orders\");\n    dispatch(getOrders());\n  }).catch(err => {\n    console.log(err.response);\n  });\n};\nexport const getOrders = () => dispatch => {\n  dispatch({\n    type: LOADING_DATA\n  });\n  axios.get(\"/orders\").then(res => {\n    dispatch({\n      type: SET_ORDERS,\n      payload: res.data.orders\n    });\n  }).catch(err => {\n    console.log(err.response);\n  });\n};\nexport const changeOrderStatus = (orderId, body) => dispatch => {\n  axios.post(`/order-status/${orderId}`, body).then(res => {\n    dispatch({\n      type: EDIT_STATUS,\n      payload: res.data.updatedOrder\n    });\n  }).catch(err => {\n    console.log(err.response);\n  });\n};\nexport const socketStatusUpdate = order => dispatch => {\n  dispatch({\n    type: EDIT_STATUS,\n    payload: order\n  });\n};","map":{"version":3,"sources":["F:/Project_300/Project_300/foodHub-frontend-client-master/src/redux/actions/dataActions.js"],"names":["SET_RESTAURANTS","LOADING_DATA","SET_RESTAURANT","LOADING_UI","SET_ERROR_ITEM","SERVER_ERROR","CLEAR_ERRORS","ADD_ITEM","DELETE_ITEM","EDIT_ITEM","ADD_CART_SUCCESS","ADD_CART_FAIL","SET_CART","DELETE_ITEM_CART","SET_ERRORS","SET_ORDERS","EDIT_STATUS","axios","axiosNewInstance","getUserData","fetchRestaurants","dispatch","type","get","then","res","payload","data","catch","err","console","log","fetchRestaurantsByAddress","lat","lng","fetchRestaurant","restId","addItem","itemData","post","item","response","deleteItem","itemId","delete","editItem","put","addToCart","getCart","deleteCartItem","removeCartItem","itemID","fetchAddress","userData","history","location","aptName","locality","street","zip","params","address","key","process","env","REACT_APP_GOOGLE_API_KEY","result","formattedAddress","results","formatted_address","geometry","addAddress","placeOrder","push","getOrders","orders","changeOrderStatus","orderId","body","updatedOrder","socketStatusUpdate","order"],"mappings":"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","sourcesContent":["import {\n  SET_RESTAURANTS,\n  LOADING_DATA,\n  SET_RESTAURANT,\n  LOADING_UI,\n  SET_ERROR_ITEM,\n  SERVER_ERROR,\n  CLEAR_ERRORS,\n  ADD_ITEM,\n  DELETE_ITEM,\n  EDIT_ITEM,\n  ADD_CART_SUCCESS,\n  ADD_CART_FAIL,\n  SET_CART,\n  DELETE_ITEM_CART,\n  SET_ERRORS,\n  SET_ORDERS,\n  EDIT_STATUS,\n} from \"../types\";\nimport axios from \"../../util/axios\";\nimport axiosNewInstance from \"axios\";\nimport { getUserData } from \"./authActions\";\n\nexport const fetchRestaurants = () => (dispatch) => {\n  dispatch({ type: LOADING_DATA });\n  axios\n    .get(\"/restaurants\")\n    .then((res) => {\n      dispatch({\n        type: SET_RESTAURANTS,\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n      console.log(err);\n      dispatch({\n        type: SET_RESTAURANTS,\n        payload: [],\n      });\n    });\n};\n\nexport const fetchRestaurantsByAddress = (lat, lng) => (dispatch) => {\n  dispatch({ type: LOADING_DATA });\n  axios\n    .get(`/restaurants-location/${lat}/${lng}`)\n    .then((res) => {\n      dispatch({\n        type: SET_RESTAURANTS,\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n      console.log(err);\n      dispatch({\n        type: SET_RESTAURANTS,\n        payload: [],\n      });\n    });\n};\n\nexport const fetchRestaurant = (restId) => (dispatch) => {\n  dispatch({ type: LOADING_DATA });\n  axios\n    .get(`/restaurant/${restId}`)\n    .then((res) => {\n      dispatch({\n        type: SET_RESTAURANT,\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n      console.log(err);\n      dispatch({\n        type: SET_RESTAURANT,\n        payload: {},\n      });\n    });\n};\n\nexport const addItem = (itemData) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(`/seller/create-item`, itemData)\n    .then((res) => {\n      dispatch({\n        type: ADD_ITEM,\n        payload: res.data.item,\n      });\n      dispatch({ type: CLEAR_ERRORS });\n    })\n    .catch((err) => {\n      console.log(err.response.data);\n      if (err.response) {\n        dispatch({\n          type: SET_ERROR_ITEM,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const deleteItem = (itemId) => (dispatch) => {\n  axios\n    .delete(`/seller/delete-item/${itemId}`)\n    .then((res) => {\n      dispatch({\n        type: DELETE_ITEM,\n        payload: itemId,\n      });\n    })\n    .catch((err) => {\n      console.log(err.response);\n    });\n};\n\nexport const editItem = (itemData, itemId) => (dispatch) => {\n  axios\n    .put(`/seller/edit-item/${itemId}`, itemData)\n    .then((res) => {\n      dispatch({\n        type: EDIT_ITEM,\n        payload: res.data.item,\n      });\n    })\n    .catch((err) => {\n      console.log(err.response.data);\n      if (err.response) {\n        dispatch({\n          type: SET_ERROR_ITEM,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const addToCart = (itemData) => (dispatch) => {\n  axios\n    .post(\"/cart\", itemData)\n    .then((res) => {\n      dispatch({\n        type: ADD_CART_SUCCESS,\n        payload: itemData.itemId,\n      });\n      dispatch(getCart());\n    })\n    .catch((err) => {\n      console.log(err.response);\n      dispatch({\n        type: ADD_CART_FAIL,\n      });\n    });\n};\n\nexport const getCart = () => (dispatch) => {\n  axios\n    .get(\"/cart\")\n    .then((res) => {\n      dispatch({\n        type: SET_CART,\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n      console.log(err.response);\n      dispatch({\n        type: SET_CART,\n        payload: [],\n      });\n    });\n};\n\nexport const deleteCartItem = (itemData) => (dispatch) => {\n  axios\n    .post(\"/delete-cart-item\", itemData)\n    .then((res) => {\n      dispatch({\n        type: DELETE_ITEM_CART,\n      });\n      dispatch(getCart());\n    })\n    .catch((err) => {\n      console.log(err.response);\n    });\n};\n\nexport const removeCartItem = (itemID) => (dispatch) => {\n  axios\n    .post(`/remove-cart-item/${itemID}`)\n    .then((res) => {\n      console.log(res.data);\n      dispatch(getCart());\n    })\n    .catch((err) => {\n      console.log(err.response);\n    });\n};\n\nexport const fetchAddress = (userData, history) => (dispatch) => {\n  const location = `+${userData.aptName},+${userData.locality},+${userData.street},+${userData.zip}`;\n  axiosNewInstance\n    .get(\"https://maps.googleapis.com/maps/api/geocode/json\", {\n      params: {\n        address: location,\n        key: process.env.REACT_APP_GOOGLE_API_KEY,\n      },\n    })\n    .then((result) => {\n      const formattedAddress = result.data.results[0].formatted_address;\n      console.log(formattedAddress);\n      const lat = result.data.results[0].geometry.location.lat;\n      const lng = result.data.results[0].geometry.location.lng;\n      userData.lat = lat;\n      userData.lng = lng;\n      userData.formattedAddress = formattedAddress;\n      dispatch(addAddress(userData, history));\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\nexport const addAddress = (userData, history) => (dispatch) => {\n  console.log(userData.formattedAddress);\n  axios\n    .post(\"/user/address\", userData)\n    .then((res) => {\n      // console.log(res.data);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      dispatch(placeOrder(history));\n    })\n    .catch((err) => {\n      console.log(err.response);\n      if (err.response) {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const placeOrder = (history) => (dispatch) => {\n  axios\n    .post(\"/order\")\n    .then((res) => {\n      history.push(\"/orders\");\n      dispatch(getOrders());\n    })\n    .catch((err) => {\n      console.log(err.response);\n    });\n};\n\nexport const getOrders = () => (dispatch) => {\n  dispatch({ type: LOADING_DATA });\n  axios\n    .get(\"/orders\")\n    .then((res) => {\n      dispatch({\n        type: SET_ORDERS,\n        payload: res.data.orders,\n      });\n    })\n    .catch((err) => {\n      console.log(err.response);\n    });\n};\n\nexport const changeOrderStatus = (orderId, body) => (dispatch) => {\n  axios\n    .post(`/order-status/${orderId}`, body)\n    .then((res) => {\n      dispatch({\n        type: EDIT_STATUS,\n        payload: res.data.updatedOrder,\n      });\n    })\n    .catch((err) => {\n      console.log(err.response);\n    });\n};\n\nexport const socketStatusUpdate = (order) => (dispatch) => {\n  dispatch({\n    type: EDIT_STATUS,\n    payload: order,\n  });\n};\n"]},"metadata":{},"sourceType":"module"}