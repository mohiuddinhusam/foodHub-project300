{"ast":null,"code":"var _jsxFileName = \"F:\\\\Project_300\\\\Project_300\\\\foodHub-frontend-client-master\\\\src\\\\components\\\\ItemCard.js\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\"; //m-ui\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\"; // Icons\n\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\"; //custom-hook\n\nimport useForm from \"../hooks/forms\";\nimport MyButton from \"../util/MyButton\";\nimport { deleteItem, editItem } from \"../redux/actions/dataActions\";\nimport ItemDialog from \"../components/ItemDialog\";\nimport { addToCart } from \"../redux/actions/dataActions\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  content: {\n    flex: \"1 0 auto\"\n  },\n  cover: {\n    height: \"180\",\n    width: \"60%\"\n  },\n  snackbar: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}));\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 10\n    }\n  }));\n}\n\nexport default function ItemCard(props) {\n  const classes = useStyles();\n  const {\n    title,\n    imageUrl,\n    description,\n    price,\n    _id\n  } = props;\n  const imageUrlSplit = imageUrl.split(\"\\\\\");\n  const finalImageUrl = `${process.env.REACT_APP_SERVER_URL}/${imageUrlSplit[0]}/${imageUrlSplit[1]}`; //3002 - server port\n\n  const dispatch = useDispatch();\n  const {\n    authenticated,\n    account: {\n      role\n    }\n  } = useSelector(state => state.auth);\n  const {\n    addCartSuccess\n  } = useSelector(state => state.data);\n  const [open, setOpen] = useState(false);\n  const [openSnackBar, setSnackBar] = useState(false);\n  const [image, setImage] = useState(null);\n  const {\n    inputs,\n    handleInputChange\n  } = useForm({\n    title: \"\",\n    description: \"\",\n    price: \"\"\n  });\n\n  const handleFileSelect = event => {\n    setImage(event.target.files[0]);\n  };\n\n  const handleClose = () => {\n    inputs.title = \"\";\n    inputs.description = \"\";\n    inputs.price = \"\";\n    setImage(null);\n    setOpen(false);\n  };\n\n  const handleSubmit = () => {\n    const itemData = new FormData();\n    if (image !== null) itemData.append(\"image\", image);else itemData.append(\"image\", imageUrl);\n    itemData.append(\"title\", inputs.title);\n    itemData.append(\"description\", inputs.description);\n    itemData.append(\"price\", inputs.price);\n    dispatch(editItem(itemData, _id)); // eslint-disable-next-line\n\n    handleClose();\n  };\n\n  const openEdit = () => {\n    inputs.title = title;\n    inputs.price = price;\n    inputs.description = description;\n    setOpen(true);\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteItem(_id));\n  };\n\n  const handleCart = () => {\n    const itemData = {\n      itemId: _id\n    };\n    dispatch(addToCart(itemData));\n  };\n\n  const handleCloseSnackBar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      setSnackBar(false);\n      return;\n    }\n\n    setSnackBar(false);\n  };\n\n  const handleSnackBar = (event, reason) => {\n    if (addCartSuccess || addCartSuccess == null) setSnackBar(true);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"h5\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, title), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    noWrap: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, description), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, \"Tk.\", price)), role === \"ROLE_SELLER\" ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MyButton, {\n    tip: \"Edit\",\n    onClick: openEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(EditIcon, {\n    style: {\n      color: \"green\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(MyButton, {\n    tip: \"Delete\",\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DeleteIcon, {\n    style: {\n      color: \"#f44336\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }))) : authenticated ? /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    style: {\n      color: \"#000\",\n      width: \"60%\",\n      marginLeft: \"20%\",\n      marginBottom: \"10%\"\n    },\n    onClick: () => {\n      handleCart();\n      handleSnackBar();\n    },\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, \"Add to Cart\") : /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    style: {\n      color: \"#000\",\n      width: \"60%\",\n      marginLeft: \"20%\",\n      marginBottom: \"10%\"\n    },\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, \"Add to Cart\"))), /*#__PURE__*/React.createElement(CardMedia, {\n    className: classes.cover,\n    image: finalImageUrl,\n    title: \"Item order\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(ItemDialog, {\n    open: open,\n    handleClose: handleClose,\n    handleSubmit: handleSubmit,\n    handleFileSelect: handleFileSelect,\n    inputs: inputs,\n    handleInputChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.snackbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    open: openSnackBar,\n    autoHideDuration: 3600,\n    onClose: handleCloseSnackBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    onClose: handleCloseSnackBar,\n    style: {\n      backgroundColor: \"#157a21\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, \"Item added to cart!\"))));\n}","map":{"version":3,"sources":["F:/Project_300/Project_300/foodHub-frontend-client-master/src/components/ItemCard.js"],"names":["React","useState","useDispatch","useSelector","Link","makeStyles","Card","CardContent","CardMedia","Button","Typography","Snackbar","MuiAlert","DeleteIcon","EditIcon","useForm","MyButton","deleteItem","editItem","ItemDialog","addToCart","useStyles","theme","root","display","details","flexDirection","content","flex","cover","height","width","snackbar","marginTop","spacing","Alert","props","ItemCard","classes","title","imageUrl","description","price","_id","imageUrlSplit","split","finalImageUrl","process","env","REACT_APP_SERVER_URL","dispatch","authenticated","account","role","state","auth","addCartSuccess","data","open","setOpen","openSnackBar","setSnackBar","image","setImage","inputs","handleInputChange","handleFileSelect","event","target","files","handleClose","handleSubmit","itemData","FormData","append","openEdit","handleDelete","handleCart","itemId","handleCloseSnackBar","reason","handleSnackBar","textAlign","color","marginLeft","marginBottom","backgroundColor"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,QAAqB,kBAArB,C,CAEA;;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,QAAP,MAAqB,wBAArB,C,CAEA;;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,QAAP,MAAqB,yBAArB,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,gBAApB;AAEA,OAAOC,QAAP,MAAqB,kBAArB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,8BAArC;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAASC,SAAT,QAA0B,8BAA1B;AAEA,MAAMC,SAAS,GAAGhB,UAAU,CAAEiB,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,OAAO,EAAE;AADL,GADiC;AAIvCC,EAAAA,OAAO,EAAE;AACPD,IAAAA,OAAO,EAAE,MADF;AAEPE,IAAAA,aAAa,EAAE;AAFR,GAJ8B;AAQvCC,EAAAA,OAAO,EAAE;AACPC,IAAAA,IAAI,EAAE;AADC,GAR8B;AAWvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE,KADH;AAELC,IAAAA,KAAK,EAAE;AAFF,GAXgC;AAevCC,EAAAA,QAAQ,EAAE;AACRD,IAAAA,KAAK,EAAE,MADC;AAER,iBAAa;AACXE,MAAAA,SAAS,EAAEX,KAAK,CAACY,OAAN,CAAc,CAAd;AADA;AAFL;AAf6B,CAAZ,CAAD,CAA5B;;AAuBA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACpB,sBAAO,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAE,CAArB;AAAwB,IAAA,OAAO,EAAC;AAAhC,KAA6CA,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AACD;;AAED,eAAe,SAASC,QAAT,CAAkBD,KAAlB,EAAyB;AACtC,QAAME,OAAO,GAAGjB,SAAS,EAAzB;AACA,QAAM;AAAEkB,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBC,IAAAA,WAAnB;AAAgCC,IAAAA,KAAhC;AAAuCC,IAAAA;AAAvC,MAA+CP,KAArD;AACA,QAAMQ,aAAa,GAAGJ,QAAQ,CAACK,KAAT,CAAe,IAAf,CAAtB;AACA,QAAMC,aAAa,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,oBAAqB,IAAGL,aAAa,CAAC,CAAD,CAAI,IAAGA,aAAa,CAAC,CAAD,CAAI,EAAlG,CAJsC,CAI+D;;AAErG,QAAMM,QAAQ,GAAGhD,WAAW,EAA5B;AAEA,QAAM;AACJiD,IAAAA,aADI;AAEJC,IAAAA,OAAO,EAAE;AAAEC,MAAAA;AAAF;AAFL,MAGFlD,WAAW,CAAEmD,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAHf;AAIA,QAAM;AAAEC,IAAAA;AAAF,MAAqBrD,WAAW,CAAEmD,KAAD,IAAWA,KAAK,CAACG,IAAlB,CAAtC;AAEA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkB1D,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAAC2D,YAAD,EAAeC,WAAf,IAA8B5D,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAAC6D,KAAD,EAAQC,QAAR,IAAoB9D,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM;AAAE+D,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAgClD,OAAO,CAAC;AAC5CwB,IAAAA,KAAK,EAAE,EADqC;AAE5CE,IAAAA,WAAW,EAAE,EAF+B;AAG5CC,IAAAA,KAAK,EAAE;AAHqC,GAAD,CAA7C;;AAMA,QAAMwB,gBAAgB,GAAIC,KAAD,IAAW;AAClCJ,IAAAA,QAAQ,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAR;AACD,GAFD;;AAIA,QAAMC,WAAW,GAAG,MAAM;AACxBN,IAAAA,MAAM,CAACzB,KAAP,GAAe,EAAf;AACAyB,IAAAA,MAAM,CAACvB,WAAP,GAAqB,EAArB;AACAuB,IAAAA,MAAM,CAACtB,KAAP,GAAe,EAAf;AACAqB,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAJ,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAND;;AAQA,QAAMY,YAAY,GAAG,MAAM;AACzB,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACA,QAAIX,KAAK,KAAK,IAAd,EAAoBU,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBZ,KAAzB,EAApB,KACKU,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBlC,QAAzB;AACLgC,IAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBV,MAAM,CAACzB,KAAhC;AACAiC,IAAAA,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+BV,MAAM,CAACvB,WAAtC;AACA+B,IAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBV,MAAM,CAACtB,KAAhC;AACAQ,IAAAA,QAAQ,CAAChC,QAAQ,CAACsD,QAAD,EAAW7B,GAAX,CAAT,CAAR,CAPyB,CAOU;;AACnC2B,IAAAA,WAAW;AACZ,GATD;;AAWA,QAAMK,QAAQ,GAAG,MAAM;AACrBX,IAAAA,MAAM,CAACzB,KAAP,GAAeA,KAAf;AACAyB,IAAAA,MAAM,CAACtB,KAAP,GAAeA,KAAf;AACAsB,IAAAA,MAAM,CAACvB,WAAP,GAAqBA,WAArB;AACAkB,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD,GALD;;AAOA,QAAMiB,YAAY,GAAG,MAAM;AACzB1B,IAAAA,QAAQ,CAACjC,UAAU,CAAC0B,GAAD,CAAX,CAAR;AACD,GAFD;;AAIA,QAAMkC,UAAU,GAAG,MAAM;AACvB,UAAML,QAAQ,GAAG;AACfM,MAAAA,MAAM,EAAEnC;AADO,KAAjB;AAGAO,IAAAA,QAAQ,CAAC9B,SAAS,CAACoD,QAAD,CAAV,CAAR;AACD,GALD;;AAOA,QAAMO,mBAAmB,GAAG,CAACZ,KAAD,EAAQa,MAAR,KAAmB;AAC7C,QAAIA,MAAM,KAAK,WAAf,EAA4B;AAC1BnB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACA;AACD;;AAEDA,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD,GAPD;;AASA,QAAMoB,cAAc,GAAG,CAACd,KAAD,EAAQa,MAAR,KAAmB;AACxC,QAAIxB,cAAc,IAAIA,cAAc,IAAI,IAAxC,EAA8CK,WAAW,CAAC,IAAD,CAAX;AAC/C,GAFD;;AAIA,sBACE,uDACE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEvB,OAAO,CAACf,IAAzB;AAA+B,IAAA,OAAO,EAAC,UAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAEe,OAAO,CAACb,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAEa,OAAO,CAACX,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAC,IAAtB;AAA2B,IAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGY,KADH,CADF,eAIE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAgC,IAAA,KAAK,EAAC,eAAtC;AAAsD,IAAA,MAAM,MAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGE,WADH,CAJF,eAOE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAgC,IAAA,KAAK,EAAC,eAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACMC,KADN,CAPF,CADF,EAYGW,IAAI,KAAK,aAAT,gBACC;AAAK,IAAA,KAAK,EAAE;AAAE6B,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAC,MAAd;AAAqB,IAAA,OAAO,EAAEP,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAE;AAAEQ,MAAAA,KAAK,EAAE;AAAT,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAC,QAAd;AAAuB,IAAA,OAAO,EAAEP,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAE;AAAEO,MAAAA,KAAK,EAAE;AAAT,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CADD,GASGhC,aAAa,gBACf,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,WADR;AAEE,IAAA,KAAK,EAAE;AACLgC,MAAAA,KAAK,EAAE,MADF;AAELpD,MAAAA,KAAK,EAAE,KAFF;AAGLqD,MAAAA,UAAU,EAAE,KAHP;AAILC,MAAAA,YAAY,EAAE;AAJT,KAFT;AAQE,IAAA,OAAO,EAAE,MAAM;AACbR,MAAAA,UAAU;AACVI,MAAAA,cAAc;AACf,KAXH;AAYE,IAAA,OAAO,EAAC,WAZV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADe,gBAkBf,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,WADR;AAEE,IAAA,KAAK,EAAE;AACLE,MAAAA,KAAK,EAAE,MADF;AAELpD,MAAAA,KAAK,EAAE,KAFF;AAGLqD,MAAAA,UAAU,EAAE,KAHP;AAILC,MAAAA,YAAY,EAAE;AAJT,KAFT;AAQE,IAAA,OAAO,EAAC,WARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CAvCJ,CADF,eAwDE,oBAAC,SAAD;AACE,IAAA,SAAS,EAAE/C,OAAO,CAACT,KADrB;AAEE,IAAA,KAAK,EAAEiB,aAFT;AAGE,IAAA,KAAK,EAAC,YAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxDF,CADF,eA+DE,oBAAC,UAAD;AACE,IAAA,IAAI,EAAEY,IADR;AAEE,IAAA,WAAW,EAAEY,WAFf;AAGE,IAAA,YAAY,EAAEC,YAHhB;AAIE,IAAA,gBAAgB,EAAEL,gBAJpB;AAKE,IAAA,MAAM,EAAEF,MALV;AAME,IAAA,iBAAiB,EAAEC,iBANrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA/DF,eAuEE;AAAK,IAAA,SAAS,EAAE3B,OAAO,CAACN,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAE4B,YADR;AAEE,IAAA,gBAAgB,EAAE,IAFpB;AAGE,IAAA,OAAO,EAAEmB,mBAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,KAAD;AACE,IAAA,OAAO,EAAEA,mBADX;AAEE,IAAA,KAAK,EAAE;AAAEO,MAAAA,eAAe,EAAE;AAAnB,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BALF,CADF,CAvEF,CADF;AAwFD","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\n//m-ui\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\n// Icons\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\n\n//custom-hook\nimport useForm from \"../hooks/forms\";\n\nimport MyButton from \"../util/MyButton\";\nimport { deleteItem, editItem } from \"../redux/actions/dataActions\";\nimport ItemDialog from \"../components/ItemDialog\";\nimport { addToCart } from \"../redux/actions/dataActions\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  content: {\n    flex: \"1 0 auto\",\n  },\n  cover: {\n    height: \"180\",\n    width: \"60%\",\n  },\n  snackbar: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2),\n    },\n  },\n}));\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default function ItemCard(props) {\n  const classes = useStyles();\n  const { title, imageUrl, description, price, _id } = props;\n  const imageUrlSplit = imageUrl.split(\"\\\\\");\n  const finalImageUrl = `${process.env.REACT_APP_SERVER_URL}/${imageUrlSplit[0]}/${imageUrlSplit[1]}`; //3002 - server port\n\n  const dispatch = useDispatch();\n\n  const {\n    authenticated,\n    account: { role },\n  } = useSelector((state) => state.auth);\n  const { addCartSuccess } = useSelector((state) => state.data);\n\n  const [open, setOpen] = useState(false);\n  const [openSnackBar, setSnackBar] = useState(false);\n  const [image, setImage] = useState(null);\n  const { inputs, handleInputChange } = useForm({\n    title: \"\",\n    description: \"\",\n    price: \"\",\n  });\n\n  const handleFileSelect = (event) => {\n    setImage(event.target.files[0]);\n  };\n\n  const handleClose = () => {\n    inputs.title = \"\";\n    inputs.description = \"\";\n    inputs.price = \"\";\n    setImage(null);\n    setOpen(false);\n  };\n\n  const handleSubmit = () => {\n    const itemData = new FormData();\n    if (image !== null) itemData.append(\"image\", image);\n    else itemData.append(\"image\", imageUrl);\n    itemData.append(\"title\", inputs.title);\n    itemData.append(\"description\", inputs.description);\n    itemData.append(\"price\", inputs.price);\n    dispatch(editItem(itemData, _id)); // eslint-disable-next-line\n    handleClose();\n  };\n\n  const openEdit = () => {\n    inputs.title = title;\n    inputs.price = price;\n    inputs.description = description;\n    setOpen(true);\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteItem(_id));\n  };\n\n  const handleCart = () => {\n    const itemData = {\n      itemId: _id,\n    };\n    dispatch(addToCart(itemData));\n  };\n\n  const handleCloseSnackBar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      setSnackBar(false);\n      return;\n    }\n\n    setSnackBar(false);\n  };\n\n  const handleSnackBar = (event, reason) => {\n    if (addCartSuccess || addCartSuccess == null) setSnackBar(true);\n  };\n\n  return (\n    <>\n      <Card className={classes.root} variant=\"outlined\">\n        <div className={classes.details}>\n          <CardContent className={classes.content}>\n            <Typography component=\"h5\" variant=\"h5\">\n              {title}\n            </Typography>\n            <Typography variant=\"subtitle1\" color=\"textSecondary\" noWrap>\n              {description}\n            </Typography>\n            <Typography variant=\"subtitle1\" color=\"textSecondary\">\n              Tk.{price}\n            </Typography>\n          </CardContent>\n          {role === \"ROLE_SELLER\" ? (\n            <div style={{ textAlign: \"center\" }}>\n              <MyButton tip=\"Edit\" onClick={openEdit}>\n                <EditIcon style={{ color: \"green\" }} />\n              </MyButton>\n              <MyButton tip=\"Delete\" onClick={handleDelete}>\n                <DeleteIcon style={{ color: \"#f44336\" }} />\n              </MyButton>\n            </div>\n          ) : authenticated ? (\n            <Button\n              color=\"secondary\"\n              style={{\n                color: \"#000\",\n                width: \"60%\",\n                marginLeft: \"20%\",\n                marginBottom: \"10%\",\n              }}\n              onClick={() => {\n                handleCart();\n                handleSnackBar();\n              }}\n              variant=\"contained\"\n            >\n              Add to Cart\n            </Button>\n          ) : (\n            <Link to=\"/login\">\n              <Button\n                color=\"secondary\"\n                style={{\n                  color: \"#000\",\n                  width: \"60%\",\n                  marginLeft: \"20%\",\n                  marginBottom: \"10%\",\n                }}\n                variant=\"contained\"\n              >\n                Add to Cart\n              </Button>\n            </Link>\n          )}\n        </div>\n        <CardMedia\n          className={classes.cover}\n          image={finalImageUrl}\n          title=\"Item order\"\n        />\n      </Card>\n      <ItemDialog\n        open={open}\n        handleClose={handleClose}\n        handleSubmit={handleSubmit}\n        handleFileSelect={handleFileSelect}\n        inputs={inputs}\n        handleInputChange={handleInputChange}\n      />\n      <div className={classes.snackbar}>\n        <Snackbar\n          open={openSnackBar}\n          autoHideDuration={3600}\n          onClose={handleCloseSnackBar}\n        >\n          <Alert\n            onClose={handleCloseSnackBar}\n            style={{ backgroundColor: \"#157a21\" }}\n          >\n            Item added to cart!\n          </Alert>\n        </Snackbar>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}