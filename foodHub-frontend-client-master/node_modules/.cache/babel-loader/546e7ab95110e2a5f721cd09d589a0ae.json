{"ast":null,"code":"import { SIGNUP_SUCCESS, LOADING_UI, SET_ERRORS, SERVER_ERROR, CLEAR_ERRORS, LOADING_USER, SET_USER, SET_ERROR, SET_UNAUTHENTICATED, SET_ERRORS_SIGNUP_SELLER } from \"../types\";\nimport axios from \"../../util/axios\";\nimport axiosNewInstance from \"axios\";\nexport const signupUser = (newUserData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/auth/signup-user\", newUserData).then(res => {\n    dispatch({\n      type: SIGNUP_SUCCESS\n    });\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/login\");\n  }).catch(err => {\n    console.log(err.response.data);\n\n    if (err.response) {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const loginAction = (userData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/auth/login\", userData).then(res => {\n    const jwt = `Bearer ${res.data.token}`;\n    localStorage.setItem(\"jwt\", jwt);\n    axios.defaults.headers.common[\"Authorization\"] = jwt;\n    dispatch(getUserData());\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    console.log(\"Authenticated, check localStorage\", jwt);\n    history.push(\"/\");\n  }).catch(err => {\n    if (err.response) {\n      dispatch({\n        type: SET_ERROR,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const getUserData = () => dispatch => {\n  dispatch({\n    type: LOADING_USER\n  });\n  axios.get(\"/user\").then(res => {\n    dispatch({\n      type: SET_USER,\n      payload: res.data.result\n    });\n  }).catch(err => console.log(err));\n};\nexport const signupSeller = (newSellerData, history) => dispatch => {\n  const location = `+${newSellerData.get(\"aptName\")},+${newSellerData.get(\"locality\")},+${newSellerData.get(\"street\")},+${newSellerData.get(\"zip\")}`;\n  axiosNewInstance.get(\"https://maps.googleapis.com/maps/api/geocode/json\", {\n    params: {\n      address: location,\n      key: process.env.REACT_APP_GOOGLE_API_KEY\n    }\n  }).then(result => {\n    if (Array.isArray(result.data.results) && result.data.results.length > 0) {\n      const formattedAddress = result.data.results[0].formatted_address;\n      const lat = result.data.results[0].geometry.location.lat;\n      const lng = result.data.results[0].geometry.location.lng;\n      newSellerData.append(\"lat\", lat);\n      newSellerData.append(\"lng\", lng);\n      newSellerData.append(\"formattedAddress\", formattedAddress);\n    }\n\n    dispatch(signupSellerFinal(newSellerData, history));\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const signupSellerFinal = (newSellerData, history) => dispatch => {\n  dispatch({\n    type: LOADING_UI\n  });\n  axios.post(\"/auth/signup-seller\", newSellerData).then(res => {\n    dispatch({\n      type: SIGNUP_SUCCESS\n    });\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n    history.push(\"/login\");\n  }).catch(err => {\n    if (err.response) {\n      dispatch({\n        type: SET_ERRORS_SIGNUP_SELLER,\n        payload: err.response.data\n      });\n    } else {\n      dispatch({\n        type: SERVER_ERROR\n      });\n    }\n  });\n};\nexport const logoutAction = history => dispatch => {\n  localStorage.removeItem(\"jwt\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({\n    type: SET_UNAUTHENTICATED\n  });\n  if (history) history.push(\"/login\");\n};","map":{"version":3,"sources":["F:/Project_300/Project_300/foodHub-frontend-client-master/src/redux/actions/authActions.js"],"names":["SIGNUP_SUCCESS","LOADING_UI","SET_ERRORS","SERVER_ERROR","CLEAR_ERRORS","LOADING_USER","SET_USER","SET_ERROR","SET_UNAUTHENTICATED","SET_ERRORS_SIGNUP_SELLER","axios","axiosNewInstance","signupUser","newUserData","history","dispatch","type","post","then","res","push","catch","err","console","log","response","data","payload","loginAction","userData","jwt","token","localStorage","setItem","defaults","headers","common","getUserData","get","result","signupSeller","newSellerData","location","params","address","key","process","env","REACT_APP_GOOGLE_API_KEY","Array","isArray","results","length","formattedAddress","formatted_address","lat","geometry","lng","append","signupSellerFinal","logoutAction","removeItem"],"mappings":"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","sourcesContent":["import {\n  SIGNUP_SUCCESS,\n  LOADING_UI,\n  SET_ERRORS,\n  SERVER_ERROR,\n  CLEAR_ERRORS,\n  LOADING_USER,\n  SET_USER,\n  SET_ERROR,\n  SET_UNAUTHENTICATED,\n  SET_ERRORS_SIGNUP_SELLER,\n} from \"../types\";\n\nimport axios from \"../../util/axios\";\nimport axiosNewInstance from \"axios\";\n\nexport const signupUser = (newUserData, history) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/auth/signup-user\", newUserData)\n    .then((res) => {\n      dispatch({\n        type: SIGNUP_SUCCESS,\n      });\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/login\");\n    })\n    .catch((err) => {\n      console.log(err.response.data);\n      if (err.response) {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const loginAction = (userData, history) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/auth/login\", userData)\n    .then((res) => {\n      const jwt = `Bearer ${res.data.token}`;\n      localStorage.setItem(\"jwt\", jwt);\n      axios.defaults.headers.common[\"Authorization\"] = jwt;\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      console.log(\"Authenticated, check localStorage\", jwt);\n      history.push(\"/\");\n    })\n    .catch((err) => {\n      if (err.response) {\n        dispatch({\n          type: SET_ERROR,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const getUserData = () => (dispatch) => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .get(\"/user\")\n    .then((res) => {\n      dispatch({\n        type: SET_USER,\n        payload: res.data.result,\n      });\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const signupSeller = (newSellerData, history) => (dispatch) => {\n  const location = `+${newSellerData.get(\"aptName\")},+${newSellerData.get(\n    \"locality\"\n  )},+${newSellerData.get(\"street\")},+${newSellerData.get(\"zip\")}`;\n  axiosNewInstance\n    .get(\"https://maps.googleapis.com/maps/api/geocode/json\", {\n      params: {\n        address: location,\n        key: process.env.REACT_APP_GOOGLE_API_KEY,\n      },\n    })\n    .then((result) => {\n      if (\n        Array.isArray(result.data.results) &&\n        result.data.results.length > 0\n      ) {\n        const formattedAddress = result.data.results[0].formatted_address;\n        const lat = result.data.results[0].geometry.location.lat;\n        const lng = result.data.results[0].geometry.location.lng;\n        newSellerData.append(\"lat\", lat);\n        newSellerData.append(\"lng\", lng);\n        newSellerData.append(\"formattedAddress\", formattedAddress);\n      }\n\n      dispatch(signupSellerFinal(newSellerData, history));\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n};\n\nexport const signupSellerFinal = (newSellerData, history) => (dispatch) => {\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/auth/signup-seller\", newSellerData)\n    .then((res) => {\n      dispatch({\n        type: SIGNUP_SUCCESS,\n      });\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(\"/login\");\n    })\n    .catch((err) => {\n      if (err.response) {\n        dispatch({\n          type: SET_ERRORS_SIGNUP_SELLER,\n          payload: err.response.data,\n        });\n      } else {\n        dispatch({\n          type: SERVER_ERROR,\n        });\n      }\n    });\n};\n\nexport const logoutAction = (history) => (dispatch) => {\n  localStorage.removeItem(\"jwt\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({ type: SET_UNAUTHENTICATED });\n  if (history) history.push(\"/login\");\n};\n"]},"metadata":{},"sourceType":"module"}